<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp"
      rel="stylesheet">
      <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="container">
        <aside class="top">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="48" height="48" role="img" aria-labelledby="logoTitle logoDesc">
                  <title id="logoTitle">SQU^RE DOFF Trading Dashboard</title>
                  <desc id="logoDesc">Square logo with an upward trending chart line indicating market performance.</desc>
                  <g opacity="0.08" fill="none" class="logo-grid" stroke-width="0.8">
                    <path d="M10 48 L54 48" />
                    <path d="M10 36 L54 36" />
                    <path d="M10 24 L54 24" />
                    <path d="M22 10 L22 54" />
                    <path d="M34 10 L34 54" />
                    <path d="M46 10 L46 54" />
                  </g>
                  <rect x="12" y="36" width="6" height="10" rx="1" class="logo-bar" opacity="0.18" />
                  <rect x="22" y="30" width="6" height="16" rx="1" class="logo-bar" opacity="0.22" />
                  <rect x="32" y="22" width="6" height="24" rx="1" class="logo-bar-active" />
                  <rect x="42" y="16" width="6" height="30" rx="1" class="logo-bar" opacity="0.18" />
                  <polyline points="12,42 20,34 28,26 36,20 44,16" fill="none" class="logo-line" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
                  <circle cx="44" cy="16" r="3.2" class="logo-accent" />
                </svg>
                <h2>SQU^RE<span class="danger">DOFF</span></h2>
            </div>
            <div class="close" id="close-btn" role="button" aria-label="Close sidebar" tabindex="0">
                <span class="material-icons-sharp" aria-hidden="true">close</span>
            </div>

            <nav class="sidebar" role="navigation" aria-label="Main navigation">
                <a href="#" aria-current="page">
                    <span class="material-icons-sharp">grid_view</span>
                    <h3>Dashboard</h3>
                </a>

                <a href="html/indecescommodities.html">
                    <span class="material-icons-sharp">show_chart</span>
                    <h3>Indices & Commodities</h3>
                </a>

                <a href="html/analytics.html">
                    <span class="material-icons-sharp">insights</span>
                    <h3>Analytics</h3>
                </a>

                <a href="html/crypto.html">
                    <span class="material-icons-sharp">currency_bitcoin</span>
                    <h3>Cryptocurrency</h3>
                </a>

                <a href="html/messages.html">
                    <span class="material-icons-sharp" aria-hidden="true">mail_outline</span>
                    <h3>Messages</h3>
                    <span class="message-count" aria-label="21 unread messages">21</span>
                </a>

                <a href="html/orders.html">
                    <span class="material-icons-sharp">inventory</span>
                    <h3>Orders</h3>
                </a>

                <a href="html/reports.html">
                    <span class="material-icons-sharp">error</span>
                    <h3>Reports</h3>
                </a>

                <a href="html/news.html">
                    <span class="material-icons-sharp">newspaper</span>
                    <h3>Financial News</h3>
                </a>

                <a href="html/settings.html">
                    <span class="material-icons-sharp">settings</span>
                    <h3>Settings</h3>
                </a>

                <a href="#">
                    <span class="material-icons-sharp">add</span>
                    <h3>Add Commodity</h3>
                </a>

                <a href="#">
                    <span class="material-icons-sharp">logout</span>
                    <h3>Logout</h3>
                </a>
            </nav>

        </aside>
        <!--((((((((((((((End of Aside Section))))))))))))))-->
        <main id="main-content" role="main" aria-label="Dashboard content">
            <h1>Main Dashboard</h1>
            <h2>Positions *Live/Historical</h2>

            <div class="date">
                <input type="date" aria-label="Select date for historical data" id="date-picker">
            </div>

 <!--((((((((((((((End of Date))))))))))))))-->

            <div class="insights" role="region" aria-label="Portfolio metrics">
                <div class="sales metric-card-clickable" role="article" aria-labelledby="total-position-label" onclick="openMetricsModal('portfolio')" style="cursor: pointer;" title="Click for detailed breakdown">
                    <span class="material-icons-sharp" aria-hidden="true">attach_money</span>
                    <div class="middle">
                        <div class="left">
                            <h3 id="total-position-label">Total Position</h3>
                            <h3>USD</h3>
                            <h1 data-live-update data-format="currency" data-base-value="247850" data-variance="0.02">$247.8K</h1>
                        </div>

                        
                        <div class="progress">
                            <svg>
                                <circle cx=38 cy=36 r=36 ></circle>
                            </svg>
                            <div class="number">
                                <p>+2.4%</p>
                            </div>
                        </div>
                    </div>
                    <small class="text-muted">Portfolio Growth</small>
                </div>
                <!--(((((((((((((End of Sales)))))))))))))-->

                <div class="expenses metric-card-clickable" role="article" aria-labelledby="pnl-label" onclick="openMetricsModal('pnl')" style="cursor: pointer;" title="Click for detailed breakdown">
                    <span class="material-icons-sharp" aria-hidden="true">trending_up</span>
                    <div class="middle">
                        <div class="left">
                            <h3 id="pnl-label">Total P&L</h3>
                            <h3>USD</h3>
                            <h1 data-live-update data-format="currency" data-base-value="12058" data-variance="0.05">+$12.1K</h1>
                        </div>
                        <div class="progress">
                            <svg>
                                <circle cx=38 cy=36 r=36 ></circle>
                            </svg>
                            <div class="number">
                                <p>+4.9%</p>
                            </div>
                        </div>
                    </div>
                    <small class="text-muted">Unrealized Gains</small>
                </div>
                <!--(((((((((((((End of Expenses)))))))))))))-->

                <div class="income metric-card-clickable" role="article" aria-labelledby="win-rate-label" onclick="openMetricsModal('winrate')" style="cursor: pointer;" title="Click for detailed breakdown">
                    
                    <span class="material-icons-sharp" aria-hidden="true">assessment</span>

                    <div class="middle">
                        <div class="left">
                            <h3 id="win-rate-label">Win Rate</h3>
                            <h1 data-live-update data-format="percentage" data-base-value="0.73" data-variance="0.05">73%</h1>
                        </div>
                        <div class="progress">
                            <svg>
                                <circle cx=38 cy=36 r=36 ></circle>
                            </svg>
                            <div class="number">
                                <p>73%</p>
                            </div>
                        </div>
                    </div>
                    <small class="text-muted">Success Rate</small>
                </div>
                <!--(((((((((((((End of Income)))))))))))))-->
            </div>
            <!--(((((((((((((End of Insights)))))))))))))-->
                <div class="recent-orders" role="region" aria-labelledby="orders-heading">
                    <h2 id="orders-heading">Indices & Commodities</h2>
                    <table role="table" aria-label="Trading positions and orders">
                        <thead>
                            <tr>
                                <th>Asset</th>
                                <th>Price/Qty</th>
                                <th>P&L</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be populated by JavaScript -->
                        </tbody>
                    </table>
                    <a href="#">Show All</a>
                </div>
        </main>
        <!--(((((((((((((End of MAIN)))))))))))))-->
        <div class="right">
            <div class="top">
                <button id="menu-btn" aria-label="Open menu" aria-expanded="false">
                    <span class="material-icons-sharp" aria-hidden="true">menu</span>
                </button>    
                    <div class="theme-toggler" role="group" aria-label="Theme selection">
                        <span class="material-icons-sharp active" role="button" aria-label="Light mode" aria-pressed="true" tabindex="0">light_mode</span>
                        <span class="material-icons-sharp" role="button" aria-label="Dark mode" aria-pressed="false" tabindex="0">dark_mode</span>
                    </div>
                    
                    <!-- API Status Indicator -->
                    <div id="apiStatus" style="display: none; padding: 0.5rem 1rem; background: #10b981; color: white; border-radius: 0.5rem; font-size: 0.85rem; font-weight: 600; margin-left: 1rem;">
                        <span class="material-icons-sharp" style="font-size: 1rem; vertical-align: middle;">cloud_done</span>
                        Live Data
                    </div>
                    
                    <div class="profile">
                        <div class="info">
                            <p> Key: <b>Gavin</b></p>
                            <small class="text-muted">Admin</small>
                        </div>
                        <div class="profile-pic">
                            <img src="assets/profile-pic-1.png" alt="Gavin's profile picture" height="50px" width="50px">
                        </div>
                    </div>
                
            </div>
        
            <!--(((((((((((((End of Top)))))))))))))-->

            <div class="recent-updates" role="region" aria-labelledby="updates-heading">
                <h2 id="updates-heading">Recent Updates</h2>

                <div class="updates" id="recentUpdates" aria-live="polite" aria-atomic="false">
                    <div class="update" role="article">
                        <div class="profile-photo update-icon success">
                            <span class="material-icons-sharp" aria-hidden="true">savings</span>
                        </div>
                        <div class="message">
                            <p><b>Gold</b> position opened at $1,942.70 - currently +1.74%</p>
                            <small class="text-muted">30 minutes ago</small>
                        </div>
                    </div>
                    
                    <div class="update" role="article">
                        <div class="profile-photo update-icon primary">
                            <span class="material-icons-sharp" aria-hidden="true">show_chart</span>
                        </div>
                        <div class="message">
                            <p><b>S&P 500</b> showing strong momentum - up +0.24% today</p>
                            <small class="text-muted">15 minutes ago</small>
                        </div>
                    </div>
                    
                    <div class="update" role="article">
                        <div class="profile-photo update-icon warning">
                            <span class="material-icons-sharp" aria-hidden="true">currency_bitcoin</span>
                        </div>
                        <div class="message">
                            <p><b>Bitcoin</b> order pending execution at $65,230.50</p>
                            <small class="text-muted">2 minutes ago</small>
                        </div>
                    </div>
                </div>

            </div>

            <!--(((((((((((((End of Recent Updates)))))))))))))-->

            <div class="sales-analytics" role="region" aria-labelledby="analytics-heading">
                <h2 id="analytics-heading">Market Analytics</h2>

                <div class="item customers" id="bestPerformer" role="article" aria-labelledby="top-performer-label">
                    <div class="icon">
                        <span class="material-icons-sharp" aria-hidden="true">trending_up</span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3 id="top-performer-label">TOP PERFORMER</h3>
                            <small class="text-muted">Gold</small>
                        </div>
                        <h5 class="success">+1.74%</h5>
                        <h3>$1,976</h3>
                    </div>   
                </div>

                <div class="item offline" id="worstPerformer" role="article" aria-labelledby="needs-attention-label">
                    <div class="icon">
                        <span class="material-icons-sharp" aria-hidden="true">trending_down</span>
                    </div>
                    <div class="right">
                        <div class="info">
                            <h3 id="needs-attention-label">NEEDS ATTENTION</h3>
                            <small class="text-muted">Crude Oil</small>
                        </div>
                        <h5 class="danger">-1.04%</h5>
                        <h3>$89.65</h3>
                    </div>
                </div>   

                <div class="item add-product" role="button" tabindex="0" aria-label="Add new trading position">
                    <div>
                        <span class="material-icons-sharp" aria-hidden="true">add</span>
                        <h3>Add Position</h3>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Position Details Modal -->
    <div id="positionModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true" style="display: none;">
        <div class="modal-overlay" aria-hidden="true"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modalTitle">Position Details</h2>
                <button class="modal-close" aria-label="Close modal">
                    <span class="material-icons-sharp">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-asset-header">
                    <div class="asset-icon">
                        <span class="material-icons-sharp">trending_up</span>
                    </div>
                    <div class="asset-info">
                        <h3 id="modalAssetName">--</h3>
                        <p class="text-muted" id="modalAssetType">--</p>
                    </div>
                    <div class="asset-status">
                        <span class="status-badge" id="modalStatus">--</span>
                    </div>
                </div>

                <div class="modal-grid">
                    <div class="modal-card">
                        <div class="card-icon success">
                            <span class="material-icons-sharp">attach_money</span>
                        </div>
                        <div class="card-content">
                            <p class="text-muted">Current Price</p>
                            <h3 id="modalCurrentPrice">--</h3>
                            <small id="modalPriceChange" class="success">--</small>
                        </div>
                    </div>

                    <div class="modal-card">
                        <div class="card-icon primary">
                            <span class="material-icons-sharp">account_balance_wallet</span>
                        </div>
                        <div class="card-content">
                            <p class="text-muted">Entry Price</p>
                            <h3 id="modalEntryPrice">--</h3>
                            <small id="modalEntryDate" class="text-muted">--</small>
                        </div>
                    </div>

                    <div class="modal-card">
                        <div class="card-icon warning">
                            <span class="material-icons-sharp">assessment</span>
                        </div>
                        <div class="card-content">
                            <p class="text-muted">Quantity</p>
                            <h3 id="modalQuantity">--</h3>
                            <small id="modalPositionSize" class="text-muted">--</small>
                        </div>
                    </div>

                    <div class="modal-card highlight">
                        <div class="card-icon">
                            <span class="material-icons-sharp">analytics</span>
                        </div>
                        <div class="card-content">
                            <p class="text-muted">Profit & Loss</p>
                            <h3 id="modalPnL">--</h3>
                            <small id="modalPnLPercent" class="success">--</small>
                        </div>
                    </div>
                </div>

                <div class="modal-details">
                    <div class="detail-row">
                        <span class="detail-label">Position Type</span>
                        <span class="detail-value" id="modalPositionType">--</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Stop Loss</span>
                        <span class="detail-value" id="modalStopLoss">--</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Take Profit</span>
                        <span class="detail-value" id="modalTakeProfit">--</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Risk/Reward Ratio</span>
                        <span class="detail-value" id="modalRiskReward">--</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Days Held</span>
                        <span class="detail-value" id="modalDaysHeld">--</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Trade ID</span>
                        <span class="detail-value text-muted" id="modalTradeId">--</span>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-outline" id="modalEditBtn">
                        <span class="material-icons-sharp">edit</span>
                        Edit Position
                    </button>
                    <button class="btn btn-danger" id="modalClosePositionBtn">
                        <span class="material-icons-sharp">close</span>
                        Close Position
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chart Tooltip -->
    <div id="chartTooltip" class="chart-tooltip" style="display: none;">
        <div class="chart-tooltip-header">
            <span id="chartTooltipAsset" class="chart-tooltip-asset">Asset</span>
            <span id="chartTooltipPrice" class="chart-tooltip-price">$0.00</span>
        </div>
        <canvas id="chartTooltipCanvas" width="280" height="140"></canvas>
        <div class="chart-tooltip-stats">
            <div class="stat">
                <span class="label">Change</span>
                <span id="chartTooltipChange" class="value">+0.00%</span>
            </div>
            <div class="stat">
                <span class="label">Volume</span>
                <span id="chartTooltipVolume" class="value">0</span>
            </div>
        </div>
    </div>

    <!-- Metrics Modal -->
    <div id="metricsModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-container" style="max-width: 900px;">
            <div class="modal-header">
                <h2 id="metricsModalTitle">Portfolio Metrics</h2>
                <button class="modal-close" onclick="closeMetricsModal()">
                    <span class="material-icons-sharp">close</span>
                </button>
            </div>
            <div class="modal-body" id="metricsModalBody">
                <!-- Content will be dynamically loaded -->
            </div>
        </div>
    </div>

    <script src="scripts/error-handler.js"></script>
    <script src="scripts/security-utils.js"></script>
    <script src="scripts/performance-utils.js"></script>
    <script src="scripts/config.js"></script>
    <script src="scripts/config.local.js"></script>
    <script src="scripts/data-service.js"></script>
    <script src="scripts/notification-service.js"></script>
    <script src="scripts/utils.js"></script>
    <script src="scripts/data-utils.js"></script>
    <script src="scripts/countup-enhanced.js"></script>
    <script src="scripts/orders.js"></script>
    <script src="scripts/position-modal.js"></script>
    <script src="scripts/chart-tooltip.js"></script>
    <script src="scripts/main.js"></script>
    
</body>
</html>